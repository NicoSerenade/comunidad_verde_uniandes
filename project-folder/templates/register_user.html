{% extends "index.html" %}

{% block styles %}
<style>
    /* Aplicar la fuente globalmente */
    body {
        font-family: 'Poppins', sans-serif; /* Fuente utilizada en "Iniciar sesión" */
        color: #000000; /* Color de texto por defecto */
        margin: 0;
        padding: 0;
    }

    /* Contenedor principal */
    .register-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: auto; /* Ajustar altura automáticamente */
        max-height: 80vh; /* Limitar la altura máxima */
        width: 90%; /* Reducir el ancho al 90% del viewport */
        max-width: 500px; /* Ajustar el ancho máximo a 500px */
        margin: 50px auto; /* Centrar el contenedor */
        text-align: center;
        background: none; /* Eliminar cualquier fondo adicional */
        padding: 20px;
    }

    /* Formulario */
    .register-form {
        display: flex;
        flex-direction: column; /* Alinear elementos en columna */
        align-items: center; /* Centrar elementos horizontalmente */
        width: 100%;
        max-width: 400px; /* Ajustar el ancho máximo del formulario */
        padding: 20px; /* Reducir el relleno */
        border-radius: 10px; /* Bordes redondeados */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Sombra sutil */
        background: white; /* Fondo blanco */
    }

    .register-form h2 {
        font-size: 2.2em; /* Tamaño del título */
        font-weight: 700; /* Negrita */
        margin-bottom: 15px; /* Más espacio debajo del título */
        color: #4caf50; /* Verde animado */
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2); /* Sombra para destacar */
    }

    .register-form p {
        margin-bottom: 15px; /* Más espacio debajo del texto descriptivo */
        font-size: 1em; /* Ajustar el tamaño del texto */
        color: #333;
    }

    .register-form label {
        display: block;
        width: 100%; /* Asegurar que las etiquetas ocupen todo el ancho */
        text-align: left; /* Alinear las etiquetas a la izquierda */
        margin-bottom: 8px; /* Más espacio debajo de las etiquetas */
        font-size: 0.9em;
        color: #0a0a0a;
    }

    .register-form input[type="text"],
    .register-form input[type="email"],
    .register-form input[type="password"] {
        width: 100%; /* Asegurar que los campos ocupen todo el ancho */
        padding: 10px; /* Ajustar el relleno interno */
        margin: 10px 0; /* Más espacio entre los campos */
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 0.9em;
    }

    .register-form button {
        width: 100%; /* Asegurar que el botón ocupe todo el ancho */
        padding: 12px; /* Aumentar el relleno interno */
        background-color: #4caf50; /* Botón verde */
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 1.2em;
        cursor: pointer;
        transition: background-color 0.3s ease;
        margin-top: 20px; /* Más espacio encima del botón */
    }

    .register-form button:hover {
        background-color: #45a049; /* Efecto hover */
    }

    .create-account {
        margin-top: 25px; /* Más espacio encima del enlace */
        font-size: 1em;
        color: #000000;
    }

    .create-account a {
        color: #4caf50;
        text-decoration: none;
        font-weight: 600;
    }

    .create-account a:hover {
        text-decoration: underline;
    }
</style>
{% endblock %}

{% block content %}
    <div class="register-container">
        <form class="register-form" action="{{ url_for('register_user') }}" method="post">
            <h2>Registro de Usuario</h2>
            <p>Completa el formulario para crear tu cuenta.</p>
            
            <label for="name">Nombre:</label>
            <input type="text" id="name" name="name" required>

            <label for="email">Correo Electrónico:</label>
            <input type="email" id="email" name="email" required>

            <label for="student_code">Código de Estudiante:</label>
            <input type="text" id="student_code" name="student_code" required>

            <label for="password">Contraseña:</label>
            <input type="password" id="password" name="password" required>

            <label for="interests">Intereses:</label>
            <input type="text" id="interests" name="interests">

            <label for="career">Carrera:</label>
            <input type="text" id="career" name="career">

            <button type="submit">Registrar</button>
        </form>
    </div>

    <script>
        // Function to update email validation based on student_code
        function updateEmailValidation() {
            const studentCode = document.getElementById('student_code').value;
            const emailInput = document.getElementById('email');
            const emailDomainText = document.getElementById('email_domain');
            
            if (studentCode.toLowerCase() === 'admin') {
                // If student_code is 'admin', remove pattern restriction
                emailInput.removeAttribute('pattern');
                emailDomainText.textContent = 'any domain';
            } else {
                // Otherwise, enforce @uniandes.edu.co pattern
                emailInput.setAttribute('pattern', '.*@uniandes\\.edu\\.co$');
                emailDomainText.textContent = '@uniandes.edu.co';
            }
        }
        
        // Initialize validation state on page load
        document.addEventListener('DOMContentLoaded', updateEmailValidation);
    </script>
{% endblock %}