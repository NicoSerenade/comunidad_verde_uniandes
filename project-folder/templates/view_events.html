<!-- view_events.html -->
{% extends "base.html" %}

{% block content %}
<div class="events-container">
  <div class="create-event-button">
    <a href="{{ url_for('create_event') }}" class="btn btn-primary">Crear Evento</a>
  </div>

  <h2>Eventos disponibles</h2>
  {% if events %}
    <div class="events-grid grid-cards">
      {% for event in events %}
        <div class="card event-card">
          <h3 class="event-title">{{ event.name }}</h3>
          <p class="event-date"><i class="fa fa-calendar"></i> {{ event.event_datetime }}</p>
          <p class="event-location"><i class="fa fa-map-marker"></i> {{ event.location }}</p>
          <p class="event-description">{{ event.description }}</p>
          <div class="event-actions">
            {% if session.get('entity_type') == 'user' %}
              <form action="{{ url_for('register_for_event', event_id=event.event_id) }}" method="post">
                <button type="submit" class="btn btn-primary btn-sm">Participar</button>
              </form>
            {% elif 'entity_type' not in session %}
              <a href="{{ url_for('login') }}" class="btn btn-secondary btn-sm">Inicia sesiÃ³n para participar</a>
            {% endif %}
            <a href="{{ url_for('view_event_participants', event_id=event.event_id) }}" class="btn btn-secondary btn-sm">Ver mÃ¡s</a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="no-events">
      <p class="no-events-message">ðŸŒ± Â¡AÃºn no hay eventos disponibles!</p>
      <p class="suggestion-message">Pronto encontrarÃ¡s actividades para unirte, colaborar y sumar puntos verdes.</p>
    </div>
  {% endif %}
</div>
{% endblock %}

{% block styles %}
<style>
.events-container { padding: 2rem 1rem; }
.create-event-button { text-align: right; margin-bottom: 1rem; }
.events-grid { margin-top: 1.5rem; }
.event-title { font-size: 1.25rem; color: var(--green-dark); margin-bottom: 0.5rem; }
.event-date, .event-location { font-size: 0.9rem; color: var(--text-dark); margin-bottom: 0.25rem; }
.event-description { font-size: 1rem; color: var(--text-dark); margin-bottom: 1rem; }
.event-actions .btn { margin-right: 0.5rem; }
.no-events { text-align: center; padding: 2rem; }
.no-events-message { font-size: 1.25rem; color: var(--green-dark); margin-bottom: 0.5rem; }
.suggestion-message { color: var(--text-dark); }
</style>
{% endblock %}
